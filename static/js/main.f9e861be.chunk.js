(this["webpackJsonprakuten-mall-sp-searchbox"]=this["webpackJsonprakuten-mall-sp-searchbox"]||[]).push([[0],{34:function(e,t,n){},35:function(e,t,n){"use strict";n.r(t);var c=n(5),r=n(7),a=n.n(r),o=n(24),s=n.n(o),i=n(18),u=n(37),l=n(17),d=n(21),h=n(20),b=n(2),g=function(e){for(var t="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",c=n.length,r=0;r<e;r++)t+=n.charAt(Math.floor(Math.random()*c));return t},p=n(11),j=d.a.cancel,_={initial:"close",id:"search-box-modal",states:{open:Object(l.a)({entry:["initInputValue","initSearchMode"],exit:"cleanSuggestion"},{initial:"idle",on:{GET_SUGGESTIONS:{target:".fetching"},CHANGE_INPUT:{target:".deboucing",actions:"setInputValue"},TOGGLE_CLEAN:{actions:["cleanSuggestion","cleanInputValue"]},CHANGE_SEARCH_MODE:{actions:"setSearchMode"},CANCEL_SEARCH:{target:"close"},DO_SEARCH:{cond:"withInputValue",target:"close",actions:["setKeyword","setFilter"]}},states:{idle:{},deboucing:{entry:["cancelSearch","sendSearchEventAfterDelay"]},fetching:{entry:"setNoError",invoke:{id:"fetch-suggestion",src:"fetchSuggestion",onDone:[{cond:"withInputValue",target:"idle",actions:"setSuggestions"},{target:"idle"}],onError:{target:"error",actions:["setError","cleanSuggestion"]}}},error:{}}}),close:{on:{OPEN_SEARCH_BOX:[{cond:"withKeyword",target:"open.fetching"},{target:"open.idle"}]}}}},O={MALL:"\u5168\u7ad9",JAPAN:"\u65e5\u672c\u8cfc\u7269/\u65c5\u904a",BOOK:"\u66f8\u7c4d/\u96fb\u5b50\u66f8"},v={keyword:"",filter:{mode:""},inputValue:"",result:"",searchMode:O.MALL,suggestions:[],loading:!1,error:null},f=Object(h.a)(Object(l.a)({id:"RakutenMallMobileSearchbox",context:v},_),{actions:{cleanSuggestion:Object(b.b)({suggestions:[]}),cleanInputValue:Object(b.b)({inputValue:""}),setKeyword:Object(b.b)({keyword:function(e,t){return t.keyword||""}}),setFilter:Object(b.b)({filter:function(e,t){var n=e.filter,c=t.newFilter,r=void 0===c?{}:c;return Object(l.a)(Object(l.a)({},n),r)}}),setInputValue:Object(b.b)({inputValue:function(e,t){return t.keyword}}),setSuggestions:Object(b.b)({suggestions:function(e,t){var n;return null!==(n=null===t||void 0===t?void 0:t.data)&&void 0!==n?n:[]}}),setSearchMode:Object(b.b)({searchMode:function(e,t){return t.searchMode}}),setResult:Object(b.b)({result:function(e,t){return t.result}}),setNoError:Object(b.b)({error:null}),setError:Object(b.b)({error:function(e,t){return t.data||!0}}),initInputValue:Object(b.b)({inputValue:function(e){return e.keyword}}),initSearchMode:Object(b.b)({searchMode:O.MALL}),sendSearchEventAfterDelay:Object(b.q)("GET_SUGGESTIONS",{delay:800,id:"debounced-search"}),cancelSearch:j("debounced-search")},guards:{withInputValue:function(e){var t=e.inputValue;return Boolean(t)},withKeyword:function(e){var t=e.keyword;return Boolean(t)}},services:{fetchSuggestion:function(e,t){var n=e.inputValue;t.keyword;return new Promise((function(e){setTimeout((function(){for(var t=[],c=0;c<10;c++)t.push("".concat(n).concat(g(Object(p.random)(3,10))));e(t)}),800)}))}}}),x=Object(r.createContext)(),S=function(){return Object(r.useContext)(x)},w=function(e){var t=e.children,n=Object(u.a)(f,{devTools:!0}),r=Object(i.a)(n,2),a=r[0],o=r[1];var s=a.context.searchMode,l={openSearchBox:function(){return o("OPEN_SEARCH_BOX")},closeSearchBox:function(){return o("CANCEL_SEARCH")},changeSearchMode:function(e){return o({type:"CHANGE_SEARCH_MODE",searchMode:e})},changeInput:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return o({type:"CHANGE_INPUT",keyword:e})},cleanInput:function(){return o("TOGGLE_CLEAN")},doSearch:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{mode:s};return o({type:"DO_SEARCH",keyword:e,newFilter:t})}};return Object(c.jsx)(x.Provider,{value:{state:a,send:o,context:a.context,actions:l},children:t})},E=function(){var e=S(),t=e.state,n=e.context.searchMode,r=e.actions.changeSearchMode;return t.matches("open")?Object(c.jsx)("div",{className:"search-page__search-tabs",children:Object(p.toPairs)(O).map((function(e){var t=Object(i.a)(e,2),a=t[0],o=t[1],s=n===o,u=s?"search-page__search-tabs__tab search-page__search-tabs__tab--active":"search-page__search-tabs__tab";return Object(c.jsx)("div",{className:u,onClick:function(){return!s&&r(O[a])},children:o},a)}))}):null},m=function(){var e=S(),t=e.state,n=e.context,r=n.suggestions,a=n.inputValue,o=e.actions.doSearch,s=t.matches("open"),i=t.matches("open.idle");return s?Object(c.jsxs)("div",{className:"search-page__suggestion-wrapper",children:[Object(c.jsx)("div",{className:"search-page__suggestion-wrapper__row",children:Object(c.jsx)("b",{children:a})}),!Object(p.isEmpty)(r)&&i&&r.map((function(e,t){var n=e.substr(a.length);return Object(c.jsxs)("div",{className:"search-page__suggestion-wrapper__row",onClick:function(){return o(e)},children:[Object(c.jsx)("b",{children:a}),n]},t)}))]}):null},C=function(){var e=S(),t=e.state,n=e.context,r=n.keyword,a=n.inputValue,o=e.actions,s=o.openSearchBox,i=o.closeSearchBox,u=o.changeInput,l=o.cleanInput,d=o.doSearch,h=t.matches("open"),b=h?"search-page__search-box search-page__search-box--open":"search-page__search-box",g=h?a:r,j=h&&!Object(p.isEmpty)(a);return Object(c.jsxs)("div",{className:b,children:[Object(c.jsxs)("div",{className:"search-page__input-row",children:[Object(c.jsx)("input",{onClick:function(){h||s()},onChange:function(e){return u(e.target.value)},value:g,className:"search-page__input-row__input",placeholder:"keywords..."}),j&&Object(c.jsx)("div",{onClick:l,className:"search-page__input-row__clean",children:"X"}),Object(c.jsx)("div",{onClick:function(){h?d(a):s()},className:"search-page__input-row__button search-page__input-row__button--search",children:"Search"}),h&&Object(c.jsx)("div",{className:"search-page__input-row__button",onClick:i,children:"Cancel"})]}),Object(c.jsx)(E,{}),Object(c.jsx)(m,{})]})},N=function(){var e,t=S().context,n=t.keyword,r=t.filter,a=null!==(e=null===r||void 0===r?void 0:r.mode)&&void 0!==e?e:"";return Object(c.jsxs)("div",{className:"search-page",children:[Object(c.jsx)("div",{className:"search-page__title",children:"Search Page"}),Object(c.jsx)(C,{}),Object(c.jsxs)("div",{className:"search-page__content",children:[Object(c.jsxs)("div",{children:["\u641c\u5c0b\u6a21\u5f0f\uff1a",a]}),Object(c.jsxs)("div",{children:["\u641c\u5c0b\u7d50\u679c\uff1a",n]})]})]})},y=(n(34),function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,38)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,a=t.getLCP,o=t.getTTFB;n(e),c(e),r(e),a(e),o(e)}))});s.a.render(Object(c.jsx)(a.a.StrictMode,{children:Object(c.jsx)(w,{children:Object(c.jsx)(N,{})})}),document.getElementById("root")),y()}},[[35,1,2]]]);
//# sourceMappingURL=main.f9e861be.chunk.js.map