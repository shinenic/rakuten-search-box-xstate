(this["webpackJsonprakuten-mall-sp-searchbox"]=this["webpackJsonprakuten-mall-sp-searchbox"]||[]).push([[0],{34:function(e,t,n){},35:function(e,t,n){"use strict";n.r(t);var c=n(5),r=n(7),a=n.n(r),s=n(24),o=n.n(s),i=n(17),u=n(37),l=n(22),h=n(20),d=n(19),p=n(2),b=function(e){for(var t="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",c=n.length,r=0;r<e;r++)t+=n.charAt(Math.floor(Math.random()*c));return t},g=n(11),j=h.a.cancel,_={initial:"close",id:"search-box-modal",states:{open:Object(l.a)({entry:["initialInputValue","cleanSuggestion"]},{initial:"idle",on:{GET_SUGGESTIONS:{target:".fetching"},CHANGE_INPUT:{target:".deboucing",actions:"setInputValue"},TOGGLE_CLEAN:{actions:["cleanSuggestion","cleanInputValue"]},CHANGE_SEARCH_TYPE:{actions:"setSearchType"},CANCEL_SEARCH:{target:"close"},DO_SEARCH:{cond:"withInputValue",target:"close",actions:["setKeyword"]}},states:{idle:{},deboucing:{entry:["cancelSearch","sendSearchEventAfterDelay"]},fetching:{entry:"setNoError",invoke:{id:"fetch-suggestion",src:"fetchSuggestion",onDone:[{cond:"withInputValue",target:"idle",actions:"setSuggestions"},{target:"idle"}],onError:{target:"error",actions:["setError","cleanSuggestion"]}}},error:{}}}),close:{on:{OPEN_SEARCH_BOX:[{cond:"withKeyword",target:"open.fetching"},{target:"open.idle"}]}}}},O={MALL:"\u5168\u7ad9",JAPAN:"\u65e5\u672c\u8cfc\u7269/\u65c5\u904a",BOOK:"\u66f8\u7c4d/\u96fb\u5b50\u66f8"},f={keyword:"",inputValue:"",result:"",searchType:O.MALL,suggestions:[],loading:!1,error:null},v=Object(d.a)(Object(l.a)({id:"RakutenMallMobileSearchbox",context:f},_),{actions:{cleanSuggestion:Object(p.b)({suggestions:[]}),cleanInputValue:Object(p.b)({inputValue:""}),setKeyword:Object(p.b)({keyword:function(e,t){return t.keyword||""}}),setInputValue:Object(p.b)({inputValue:function(e,t){return t.keyword}}),setSuggestions:Object(p.b)({suggestions:function(e,t){var n;return null!==(n=null===t||void 0===t?void 0:t.data)&&void 0!==n?n:[]}}),setSearchType:Object(p.b)({searchType:function(e,t){return t.searchType}}),setResult:Object(p.b)({result:function(e,t){return t.result}}),setNoError:Object(p.b)({error:null}),setError:Object(p.b)({error:function(e,t){return t.data||!0}}),initialInputValue:Object(p.b)({inputValue:function(e){return e.keyword}}),sendSearchEventAfterDelay:Object(p.q)("GET_SUGGESTIONS",{delay:800,id:"debounced-search"}),cancelSearch:j("debounced-search")},guards:{withInputValue:function(e){var t=e.inputValue;return Boolean(t)},withKeyword:function(e){var t=e.keyword;return Boolean(t)}},services:{fetchSuggestion:function(e,t){var n=e.inputValue;t.keyword;return new Promise((function(e){setTimeout((function(){for(var t=[],c=0;c<10;c++)t.push("".concat(n).concat(b(Object(g.random)(3,10))));e(t)}),800)}))}}}),x=Object(r.createContext)(),S=function(){return Object(r.useContext)(x)},y=function(e){var t=e.children,n=Object(u.a)(v,{devTools:!0}),r=Object(i.a)(n,2),a=r[0],s=r[1];var o={openSearchBox:function(){return s("OPEN_SEARCH_BOX")},closeSearchBox:function(){return s("CANCEL_SEARCH")},changeSearchType:function(e){return s({type:"CHANGE_SEARCH_TYPE",searchType:e})},changeInput:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return s({type:"CHANGE_INPUT",keyword:e})},cleanInput:function(){return s("TOGGLE_CLEAN")},doSearch:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return s({type:"DO_SEARCH",keyword:e})}};return Object(c.jsx)(x.Provider,{value:{state:a,send:s,context:a.context,actions:o},children:t})},E=function(){var e=S(),t=e.state,n=e.context.searchType,r=e.actions.changeSearchType;return t.matches("open")?Object(c.jsx)("div",{className:"search-page__search-tabs",children:Object(g.toPairs)(O).map((function(e){var t=Object(i.a)(e,2),a=t[0],s=t[1],o=n===s,u=o?"search-page__search-tabs__tab search-page__search-tabs__tab--active":"search-page__search-tabs__tab";return Object(c.jsx)("div",{className:u,onClick:function(){return!o&&r(O[a])},children:s},a)}))}):null},w=function(){var e=S(),t=e.state,n=e.context,r=n.suggestions,a=n.inputValue,s=e.actions.doSearch,o=t.matches("open"),i=t.matches("open.idle");return o?Object(c.jsxs)("div",{className:"search-page__suggestion-wrapper",children:[Object(c.jsx)("div",{className:"search-page__suggestion-wrapper__row",children:Object(c.jsx)("b",{children:a})}),!Object(g.isEmpty)(r)&&i&&r.map((function(e,t){var n=e.substr(a.length);return Object(c.jsxs)("div",{className:"search-page__suggestion-wrapper__row",onClick:function(){return s(e)},children:[Object(c.jsx)("b",{children:a}),n]},t)}))]}):null},m=function(){var e=S(),t=e.state,n=e.context,r=n.keyword,a=n.inputValue,s=e.actions,o=s.openSearchBox,i=s.closeSearchBox,u=s.changeInput,l=s.cleanInput,h=s.doSearch,d=t.matches("open"),p=d?"search-page__search-box search-page__search-box--open":"search-page__search-box",b=d?a:r,j=d&&!Object(g.isEmpty)(a);return Object(c.jsxs)("div",{className:p,children:[Object(c.jsxs)("div",{className:"search-page__input-row",children:[Object(c.jsx)("input",{onClick:function(){d||o()},onChange:function(e){return u(e.target.value)},value:b,className:"search-page__input-row__input",placeholder:"keywords..."}),j&&Object(c.jsx)("div",{onClick:l,className:"search-page__input-row__clean",children:"X"}),Object(c.jsx)("div",{onClick:function(){d?h(a):o()},className:"search-page__input-row__button search-page__input-row__button--search",children:"Search"}),d&&Object(c.jsx)("div",{className:"search-page__input-row__button",onClick:i,children:"Cancel"})]}),Object(c.jsx)(E,{}),Object(c.jsx)(w,{})]})},C=function(){var e=S().context,t=e.keyword,n=e.searchType;return Object(c.jsxs)("div",{className:"search-page",children:[Object(c.jsx)("div",{className:"search-page__title",children:"Search Page"}),Object(c.jsx)(m,{}),Object(c.jsxs)("div",{className:"search-page__content",children:[Object(c.jsxs)("div",{children:["\u641c\u5c0b\u7a2e\u985e\uff1a",n]}),Object(c.jsxs)("div",{children:["\u641c\u5c0b\u7d50\u679c\uff1a",t]})]})]})},N=(n(34),function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,38)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,a=t.getLCP,s=t.getTTFB;n(e),c(e),r(e),a(e),s(e)}))});o.a.render(Object(c.jsx)(a.a.StrictMode,{children:Object(c.jsx)(y,{children:Object(c.jsx)(C,{})})}),document.getElementById("root")),N()}},[[35,1,2]]]);
//# sourceMappingURL=main.a4bcc73a.chunk.js.map